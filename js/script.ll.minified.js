(function(b){b.fn.lazyload=function(d){var a={threshold:0,failurelimit:0,event:"scroll",effect:"show",container:window};d&&b.extend(a,d);var e=this;"scroll"==a.event&&b(a.container).bind("scroll",function(){var c=0;e.each(function(){if(!(b.abovethetop(this,a)||b.leftofbegin(this,a)))if(!b.belowthefold(this,a)&&!b.rightoffold(this,a))b(this).trigger("appear");else if(c++>a.failurelimit)return false});var f=b.grep(e,function(j){return!j.loaded});e=b(f)});this.each(function(){var c=this;undefined==b(c).attr("original")&& b(c).attr("original",b(c).attr("src"));if("scroll"!=a.event||undefined==b(c).attr("src")||a.placeholder==b(c).attr("src")||b.abovethetop(c,a)||b.leftofbegin(c,a)||b.belowthefold(c,a)||b.rightoffold(c,a)){a.placeholder?b(c).attr("src",a.placeholder):b(c).removeAttr("src");c.loaded=false}else c.loaded=true;b(c).one("appear",function(){this.loaded||b("<img />").bind("load",function(){b(c).hide().attr("src",b(c).attr("original"))[a.effect](a.effectspeed);c.loaded=true}).attr("src",b(c).attr("original"))}); "scroll"!=a.event&&b(c).bind(a.event,function(){c.loaded||b(c).trigger("appear")})});b(a.container).trigger(a.event);return this};b.belowthefold=function(d,a){return(a.container===undefined||a.container===window?b(window).height()+b(window).scrollTop():b(a.container).offset().top+b(a.container).height())<=b(d).offset().top-a.threshold};b.rightoffold=function(d,a){return(a.container===undefined||a.container===window?b(window).width()+b(window).scrollLeft():b(a.container).offset().left+b(a.container).width())<= b(d).offset().left-a.threshold};b.abovethetop=function(d,a){return(a.container===undefined||a.container===window?b(window).scrollTop():b(a.container).offset().top)>=b(d).offset().top+a.threshold+b(d).height()};b.leftofbegin=function(d,a){return(a.container===undefined||a.container===window?b(window).scrollLeft():b(a.container).offset().left)>=b(d).offset().left+a.threshold+b(d).width()};b.extend(b.expr[":"],{"below-the-fold":"$.belowthefold(a, {threshold : 0, container: window})","above-the-fold":"!$.belowthefold(a, {threshold : 0, container: window})", "right-of-fold":"$.rightoffold(a, {threshold : 0, container: window})","left-of-fold":"!$.rightoffold(a, {threshold : 0, container: window})"})})(jQuery);function updateMarketPlaceOffers(){var b,d=0,a=[];for(d=0;d<MarketPlaceOffers.length;d++){b=MarketPlaceOffers[d].split("|");a.push(b[1])}$.getJSON("MarketPlace/?jsoncallback=?",{prid:a},function(e){$(function(){for(var c;c=MarketPlaceOffers.pop();){c=c.split("|");$("#"+c[0]).html(e["id"+c[1]].MarketPlaceSummary)}fixBlocksHeight()})})} var IS_IE=document.all&&window.print&&!window.opera&&/MSIE [56]/.test(navigator.userAgent),heightPropertyToUse=IS_IE?"height":"minHeight";function findPos(b){var d=curtop=0;if(b.offsetParent){d=b.offsetLeft;for(curtop=b.offsetTop;b=b.offsetParent;){d+=b.offsetLeft;curtop+=b.offsetTop}}return[d,curtop]}function intStyleJ(b,d){var a=parseInt($(b).css(d));if(isNaN(a))a=0;return a}var arrLineOfMiseEnAvant=[],arrLineOfAlignedProduct=[],arrBlocksInCol=[],arrLineOfBigBlock=[],arrLineOfAddressBlock=[]; function findListParent(b){for(b=b;b.nodeName!="LI";)b=b.parentNode;return b} function getAllBlocks(){var b=document.body;if(b){b=b.getElementsByTagName("div");for(var d=0;d<b.length;d++){var a=b[d];if(/\bline_[2345]cols/.test(a.className)){a.getElementsByTagName("h2");var e=a.getElementsByTagName("div");if(/\baligner_produits\b/.test(a.className)){arrLineOfAlignedProduct.push(a);a.blocks=[]}for(var c=0;c<e.length;c++){var f=e[c];if(/\bblock\b/.test(f.className)){if(/\bmise_en_avant\b/.test(f.className)){if(!a.alreadyAdded){arrLineOfMiseEnAvant.push(a);a.alreadyAdded=true}if(!a.miseEnAvantBlocks)a.miseEnAvantBlocks= [];a.miseEnAvantBlocks.push(f)}if(/\bblk_inside gradient flat\b/.test(f.className)){if(!a.alreadyAdded){arrLineOfBigBlock.push(a);a.alreadyAdded=true}if(!a.miseEnAvantBlocks)a.miseEnAvantBlocks=[];a.miseEnAvantBlocks.push(f)}if(/\bblk_address\b/.test(f.className)){if(!a.alreadyAdded){arrLineOfAddressBlock.push(a);a.alreadyAdded=true}if(!a.miseEnAvantBlocks)a.miseEnAvantBlocks=[];a.miseEnAvantBlocks.push(f)}a.blocks&&a.blocks.push(f);/\bnoresize\b/.test(f.className)||arrBlocksInCol.push(f);f.lineContainer= a}}}}}} function fixMiseEnAvant(){for(var b=0;b<arrLineOfMiseEnAvant.length;b++){var d=arrLineOfMiseEnAvant[b],a=[],e=[],c=[],f=[],j=[],h=d.getElementsByTagName("h2"),k=d.getElementsByTagName("dd"),l=d.getElementsByTagName("div"),g=[],i=0;for(d=0;d<k.length;d++){i=k[d];if(i.className.match(/\bimg\b/)){a.push(i);i.isImage=true}i.className.match(/\bresume\b/)&&e.push(i);i.className.match(/\bprix\b/)&&g.push(i);i.className.match(/\blinks\b/)&&c.push(i);i.className.match(/\bshomeMV\b/)&&f.push(i)}for(d=0;d<l.length;d++){i= l[d];i.className.match(/\bblk_footer\b/)&&j.push(i)}a=[h,a,e,g,c,f,j];for(d=j=f=c=e=0;d<a.length;d++){h=a[d];for(l=i=0;l<h.length;l++){g=h[l];if(g.offsetTop>i)i=g.offsetTop;if(g.isImage)if(g.offsetHeight>=e)e=g.offsetHeight;if(g.className=="blk_header")if(g.offsetHeight>=c)c=g.offsetHeight;if(g.className.match(/\bresume\b/))if(g.offsetHeight>=j)j=g.offsetHeight;if(g.className.match(/\bshomeMV\b/))if(g.offsetTop>=i)i=g.offsetTop;if(g.className.match(/\bblk_footer\b/)&&g.nodeName=="DIV"){g=g.offsetHeight- (intStyleJ(g,"padding-top")+intStyleJ(g,"padding-bottom"));if(g>=f)f=g}}for(l=0;l<h.length;l++){g=h[l];if(g.isImage){k=g.offsetHeight;var m=e-k;k=parseInt(m/2);m=m-k;intStyleJ(g,"margin-top");g.style.paddingTop=intStyleJ(g,"padding-top")+k+"px";g.style.paddingBottom=intStyleJ(g,"padding-bottom")+m+"px";g.style.marginTop=intStyleJ(g,"margin-top")+(i-g.offsetTop)+"px"}else if(g.className=="blk_header"){k=g.offsetHeight;m=c-k;k=parseInt(m/2);m=m-k;g.childNodes[0].style.paddingTop=intStyleJ(g.childNodes[0], "padding-top")+k+"px";g.childNodes[0].style.paddingBottom=intStyleJ(g.childNodes[0],"padding-bottom")+m+"px"}else if(g.className.match(/\bresume\b/))g.style.paddingBottom=j-g.offsetHeight+"px";else if(g.className.match(/\bprix\b/))g.style.marginTop=i-g.offsetTop+"px";else if(g.className.match(/\bshomeMV\b/))g.style.marginTop=i-g.offsetTop+"px";else if(g.className.match(/\bblk_footer\b/)&&g.nodeName=="DIV")g.style[heightPropertyToUse]=f+"px";else g.style.paddingTop=i-g.offsetTop+"px"}}}} function fixAligneProduits(){for(var b=0,d=0,a=0,e=0;e<arrLineOfAlignedProduct.length;e++){for(var c=arrLineOfAlignedProduct[e],f=0;f<c.blocks.length;f++){a=c.blocks[f];a.linksBlocks=[];a.getElementsByTagName("dd");if(a.linksBlocks.length>b)b=a.linksBlocks.length;a.produits=[];for(var j=a.getElementsByTagName("li"),h=0;h<j.length;h++)j[h].parentNode.className.match(/\blisteproduits\b/)&&a.produits.push(j[h]);if(a.produits.length>d)d=a.produits.length}for(f=0;f<d;f++){for(h=a=0;h<c.blocks.length;h++)if(f< c.blocks[h].produits.length){j=c.blocks[h].produits[f];if(j.offsetHeight>a)a=j.offsetHeight}for(h=0;h<c.blocks.length;h++)if(f<c.blocks[h].produits.length){j=c.blocks[h].produits[f];j.style[heightPropertyToUse]=a-intStyleJ(j,"padding-top")-intStyleJ(j,"padding-bottom")+"px"}}}} function fixAddressBlock(){for(var b=0;b<arrLineOfAddressBlock.length;b++){for(var d=[],a=arrLineOfAddressBlock[b].getElementsByTagName("ul"),e=0,c=0;c<a.length;c++){var f=a[c];f.className.match(/\blks\b/)&&d.push(f)}for(a=0;a<d.length;a++){c=d[a];if(c.offsetTop>e)e=c.offsetTop;else c.style.marginTop=e-c.offsetTop+"px";c.style.height="2em"}}} function fixBlocksHeight(){for(var b,d=0;d<arrBlocksInCol.length;d++){b=null;for(var a=arrBlocksInCol[d],e=a.getElementsByTagName("div"),c=0;c<e.length;c++)if(e[c].className.match(/\bblk_content\b/)){b=e[c];break}if(b)b.style[heightPropertyToUse]=b.offsetHeight+(a.lineContainer.offsetHeight-a.offsetHeight)-(intStyleJ(b,"padding-top")+intStyleJ(b,"padding-bottom"))+"px"}}var listes_inline=[],listes_2cols=[]; function getAllLists(){for(var b=document.getElementsByTagName("ul"),d=0;d<b.length;d++){var a=b[d];a.listItems=[];if(a.offsetHeight>0)if(a.className.match(/\b(produits_conseilles|liste_inline|liste_3cols)\b/)){listes_inline.push(a);for(var e=0;e<a.childNodes.length;e++){var c=a.childNodes[e];c.nodeType==1&&c.nodeName=="LI"&&a.listItems.push(c)}a.linksItems=[];a.evalItems=[];if(a.className.match(/\bproduits_conseilles\b/)){var f=a.getElementsByTagName("ul");for(e=0;e<f.length;e++){c=f[e];c.className.match(/\blinks\b/)&& a.linksItems.push(c)}}else if(a.className.match(/\bliste_inline\b/)){f=a.getElementsByTagName("div");for(e=0;e<f.length;e++){c=f[e];c.className.match(/\beval\b/)&&a.evalItems.push(c)}}}else if(a.className.match(/\bliste_2cols\b/)){listes_2cols.push(a);a.itemsLeft=[];a.itemsRight=[];for(e=counter=0;e<a.childNodes.length;e++){c=a.childNodes[e];if(c.nodeType==1&&c.nodeName=="LI"){f=c.getElementsByTagName("dd");for(var j=0;j<f.length;j++){var h=f[j];if(h.className.match(/\blinks\b/))c.linksBlock=h}counter% 2?a.itemsRight.push(c):a.itemsLeft.push(c);counter++}}}}} function fixListeInline(){for(var b=0;b<listes_inline.length;b++){for(var d=listes_inline[b],a=0,e=0;e<d.listItems.length;e++){var c=d.listItems[e];if(c.offsetHeight>a)a=c.offsetHeight}for(e=0;e<d.listItems.length;e++){c=d.listItems[e];c.style[heightPropertyToUse]=a-intStyleJ(c,"padding-top")-intStyleJ(c,"padding-bottom")+"px"}if(d.linksItems&&d.linksItems.length>0){a=d.linksItems;var f=0;for(e=0;e<a.length;e++){c=a[e];if(c.offsetTop>f)f=c.offsetTop}for(e=0;e<a.length;e++){c=a[e];c.style.paddingTop= intStyleJ(c,"padding-top")+(f-c.offsetTop)+"px"}}if(d.evalItems&&d.evalItems.length>0){a=d.evalItems;for(e=f=0;e<a.length;e++){c=a[e];d=findListParent(c);d=findPos(c)[1]-findPos(d)[1];c.specialOffsetTop=d;if(d>f)f=d}for(e=0;e<a.length;e++){c=a[e];c.style.marginTop=f-c.specialOffsetTop+"px"}}}} function fixListe2cols(){for(var b=0;b<listes_2cols.length;b++)for(var d=listes_2cols[b],a=0;a<d.itemsLeft.length;a++){var e=d.itemsLeft[a],c=d.itemsRight[a],f=e.linksBlock.offsetTop>c.linksBlock.offsetTop?e.linksBlock.offsetTop:c.linksBlock.offsetTop;e.linksBlock.style.paddingTop=intStyleJ(e.linksBlock,"padding-top")+(f-e.linksBlock.offsetTop)+"px";c.linksBlock.style.paddingTop=intStyleJ(c.linksBlock,"padding-top")+(f-c.linksBlock.offsetTop)+"px";f=intStyleJ(e,"padding-top")+intStyleJ(e,"padding-bottom")+ intStyleJ(e,"border-top-width")+intStyleJ(e,"border-bottom-width");e.style[heightPropertyToUse]=c.style[heightPropertyToUse]=(e.offsetHeight>=c.offsetHeight?e.offsetHeight:c.offsetHeight)-f+"px"}}$(document).ready(function(){getAllBlocks();fixAligneProduits();getAllLists();fixMiseEnAvant();fixBlocksHeight();fixAddressBlock()});function LaunchSearch(){window.open("http://www4.fnac.com/r/"+$("#Fnac_Search").val()+"?SCat="+$("#SCat").val()+"&sft="+$("#sft").val(),"_self")} function ChangeContext(){$("#ebook").val();$("#SCat").val()=="ebook"?$("#SCat").val("book"):$("#ebook").val("false")}function checkKey(){window.event.keyCode==13&&ChangeContext()}function PopUpBase(b,d,a,e,c,f){window.open(b,d,"toolbar=no,location=no,menubar=no,status=no,scrollbars=yes,resizable="+(c?"yes":"no")+(f?",top=0,left=0":"")+",width="+a+",height="+e)}function PopUpService(b,d,a){PopUpBase(b,"diaporama",d,a,true)}function DisplayPopUp(b){PopUpBase(b,"PopUp",530,585,true)} function DisplayPopUpGratuit(b){PopUpBase(b,"PopUp",530,585,true,true)}function Diaporamas(b,d,a){PopUpBase(b,"diaporama",d,a,true,true)}function SonDiapo(b){window.open(b,"diaporama","top=0,left=0")}function EteFnac(b,d,a){window.name="ete_fnac";PopUpBase(b,"EteFnac",d,a,true,false)}function PopupLibre(b,d,a){PopUpBase(b,"diaporama",d,a,true);return false}function PopupNoLibre(b,d,a){PopUpBase(b,"diaporama",d,a,true);return false}var nbBanner=3,idSuivant,puce,monTimer; function demarreRotation(){afficheBanner("visu_banner_0","rotationOk");for(var b=0;b<nbBanner;b++)$("#puce_"+b).click(function(d){afficheBanner($(d.target).attr("href").replace(/^#/,""),"rotationOk");return false})} function afficheBanner(b,d){clearTimeout(monTimer);puce=parseInt(b.substring(12));idSuivant=puce+1;if(idSuivant>=nbBanner)idSuivant=0;var a=$("#"+b);if($("a",a).attr("rel").length){var e=$("a",a).attr("rel");$("a>b",a).css("background-image","url("+e+")");$("a",a).attr("rel","")}a.show().siblings(".banner").hide();$("#puce_"+puce).addClass("active").siblings().removeClass("active");if(d=="rotationOk")monTimer=setTimeout("afficheBanner('visu_banner_'+idSuivant,'rotationOk')",3500);else{clearTimeout(monTimer); monTimer=setTimeout("afficheBanner('visu_banner_'+idSuivant,'rotationOk')",1E4)}}function findValueCallback(){$("#QuickSearchForm").submit()}function displayWaiting(){$("#waitingMsg").length||$("#HeaderBasket").after('<div id="waitingMsg"><img src="img/chrono_anim.gif" alt="Veuillez patienter..." /><p>Veuillez patienter...</p></div>');$("#waitingMsg").show("fast")} function setLinks(b){$("a,area",b).each(function(){var d=$(this).attr("href");if(d.indexOf("#")==-1)$(this).attr("href",d+(d.indexOf("?")==-1?"?":"&")+"SID=e85f0b48%2Dae1d%2Da5f5%2Daa15%2Dfbffdc4e1c1a&UID=0e3649c79%2D3afd%2D18b8%2D7817%2Dfa868bc99668&Origin=FnacAff&OrderInSession=0&TTL=241020101133")})} $(function(){$.get("menu_full.html",function(b){b=jQuery("<div></div>").html(b);$("#onglets-full >li",b).each(function(){var d=$(this).attr("class");$("a:first",this).remove();$("#onglets li."+d).append($(this).html())});$("#onglets> li> a").mouseenter(function(){if(megamenu_sprite){$("#onglets .megaMenu .vignet b").css("background-image","url("+megamenu_sprite+")");megamenu_sprite=null}$(this).addClass("hover").siblings(".megaMenu").addClass("menu_actif")}).mouseleave(function(){$(this).removeClass("hover").siblings(".megaMenu").removeClass("menu_actif")}); $("#onglets .megaMenu").mouseenter(function(){$(this).addClass("menu_actif");$(this).siblings("a").addClass("hover")}).mouseleave(function(){$(this).removeClass("menu_actif");$(this).siblings("a").removeClass("hover")})});demarreRotation();setLinks($("#page"));$("#Fnac_Search").one("focus",function(){$.getScript("js/autocomplete.minified.js",function(){$("#SCat").change(function(){$("#Fnac_Search").flushCache();$("#SCat").val()=="ebook"&&$("#ebook").val("true")});$("#Fnac_Search").autocomplete("http://autocompletion.fnac.com/search-autocomplete/autocomplete?method=GetCommonSuggest", {width:260,selectFirst:false,max:10,scrollHeight:200,cacheLength:0,delay:150,dataType:"jsonp",highlight:function(b,d){return b.replace(RegExp("(?![^&;]+;)(?!<[^<>]*)("+d.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","i"),"<strong>$1</strong>")},extraParams:{text:function(){return $("#Fnac_Search").val()},category:function(){return $("#SCat").val().replace(/!1$/,"")},encoding:"UTF-8"},parse:function(b){return $.map(b,function(d){return{data:d,value:d.sentence,result:d.sentence}})}, formatItem:function(b){return b.sentence}});$("#Fnac_Search").result(function(b,d,a){d&&findValueCallback(b,d,a)})})});setTimeout("$('#banner186756').attr('src','http://s1.webperf-contest.com/4cc80752a91cc/img/186x756_25082010.gif')",2E3)});typeof window.boot_js!="undefined"&&boot_js();